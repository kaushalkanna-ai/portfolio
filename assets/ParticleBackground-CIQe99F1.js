import{r as v,j as E}from"./animations-CjbjhDXN.js";import{f as p,g as P,h as q}from"./index-U5Hof6O6.js";import"./vendor-qkC6yhPU.js";const C=i=>i==="light"?`rgba(37, 99, 235, ${Math.random()*.5+.3})`:`rgba(59, 130, 246, ${Math.random()*.4+.5})`,D=(i,t)=>i==="light"?`rgba(37, 99, 235, ${Math.min(t,.6)})`:`rgba(59, 130, 246, ${Math.min(t,1)})`;class L{constructor(t,d){this.x=Math.random()*t,this.y=Math.random()*d,this.vx=(Math.random()-.5)*.5,this.vy=(Math.random()-.5)*.5,this.size=Math.random()*2+1,this.baseX=this.x,this.baseY=this.y,this.density=Math.random()*30+1,this.color=null}update(t,d,e){if(t.x!=null){let n=t.x-this.x,c=t.y-this.y,a=Math.sqrt(n*n+c*c);if(a<t.radius){let u=n/a,w=c/a,h=t.radius,s=(h-a)/h,r=u*s*this.density,o=w*s*this.density;this.x-=r,this.y-=o}}this.x+=this.vx,this.y+=this.vy,(this.x<0||this.x>d)&&(this.vx*=-1),(this.y<0||this.y>e)&&(this.vy*=-1)}draw(t,d){(!this.color||Math.random()>.99)&&(this.color=C(d)),t.beginPath(),t.arc(this.x,this.y,this.size,0,Math.PI*2),t.fillStyle=this.color,t.fill()}}const R=(i,t,d,e,n,c)=>{if(i.clearRect(0,0,t,d),e.forEach(a=>{a.update(n,t,d),a.draw(i,c)}),t>=768){const w=new Map;for(let h=0;h<e.length;h++){const s=e[h];for(let r=h+1;r<e.length;r++){const o=e[r],m=s.x-o.x,y=s.y-o.y;if(Math.abs(m)>150||Math.abs(y)>150)continue;const g=m*m+y*y;if(g<22500){let M=.25*(1-Math.sqrt(g)/150);if(n.x!=null){const f=s.x-n.x,b=s.y-n.y;Math.abs(f)<n.radius&&Math.abs(b)<n.radius&&f*f+b*b<n.radius*n.radius&&(M+=.3)}const l=Math.round(M*100)/100;w.has(l)||w.set(l,[]),w.get(l).push({ax:s.x,ay:s.y,bx:o.x,by:o.y})}}}w.forEach((h,s)=>{i.beginPath(),i.strokeStyle=D(c,s),i.lineWidth=1,h.forEach(({ax:r,ay:o,bx:m,by:y})=>{i.moveTo(r,o),i.lineTo(m,y)}),i.stroke()})}},T=()=>{const i=v.useRef(null),{theme:t}=p(),d=v.useRef(t);return v.useEffect(()=>{d.current=t},[t]),v.useEffect(()=>{const e=i.current,n=e.getContext("2d");let c,a=[],u={x:null,y:null,radius:150};const w=P(),h=window.innerWidth<768,s=l=>{if(h||w.shouldReduceParticles)return;const f=e.getBoundingClientRect();u.x=l.clientX-f.left,u.y=l.clientY-f.top},r=()=>{u.x=null,u.y=null};function o(){a=[];const l=q(window.innerWidth,w);for(let f=0;f<l;f++)a.push(new L(e.width,e.height))}let m=0;const g=1e3/(w.shouldReduceParticles?30:60),x=(l=0)=>{if(l-m<g){c=requestAnimationFrame(x);return}m=l,R(n,e.width,e.height,a,u,d.current),c=requestAnimationFrame(x)},M=()=>{window.innerWidth===e.width&&window.innerWidth<768||(e.width=window.innerWidth,e.height=window.innerHeight,u.radius=window.innerWidth<768?80:150,window.requestIdleCallback?window.requestIdleCallback(()=>o(),{timeout:1e3}):o())};return window.addEventListener("resize",M),window.addEventListener("mousemove",s),window.addEventListener("touchend",r),window.addEventListener("mouseout",r),e.width=window.innerWidth,e.height=window.innerHeight,u.radius=window.innerWidth<768?80:150,window.requestIdleCallback?window.requestIdleCallback(()=>{o(),x()},{timeout:500}):(o(),x()),()=>{window.removeEventListener("resize",M),window.removeEventListener("mousemove",s),window.removeEventListener("touchend",r),window.removeEventListener("mouseout",r),cancelAnimationFrame(c)}},[]),E.jsx("canvas",{ref:i,className:"absolute inset-0 z-0 pointer-events-none"})};export{T as default};
