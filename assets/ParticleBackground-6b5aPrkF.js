import{r as b,j as E}from"./animations-CjbjhDXN.js";import{f as P}from"./index-dCACIQKr.js";import"./vendor-qkC6yhPU.js";const p=i=>i==="light"?`rgba(37, 99, 235, ${Math.random()*.5+.3})`:`rgba(59, 130, 246, ${Math.random()*.4+.5})`,C=(i,t)=>i==="light"?`rgba(37, 99, 235, ${Math.min(t,.6)})`:`rgba(59, 130, 246, ${Math.min(t,1)})`;class q{constructor(t,n){this.x=Math.random()*t,this.y=Math.random()*n,this.vx=(Math.random()-.5)*.5,this.vy=(Math.random()-.5)*.5,this.size=Math.random()*2+1,this.baseX=this.x,this.baseY=this.y,this.density=Math.random()*30+1,this.color=null}update(t,n,e){if(t.x!=null){let s=t.x-this.x,l=t.y-this.y,a=Math.sqrt(s*s+l*l);if(a<t.radius){let u=s/a,w=l/a,h=t.radius,o=(h-a)/h,d=u*o*this.density,r=w*o*this.density;this.x-=d,this.y-=r}}this.x+=this.vx,this.y+=this.vy,(this.x<0||this.x>n)&&(this.vx*=-1),(this.y<0||this.y>e)&&(this.vy*=-1)}draw(t,n){(!this.color||Math.random()>.99)&&(this.color=p(n)),t.beginPath(),t.arc(this.x,this.y,this.size,0,Math.PI*2),t.fillStyle=this.color,t.fill()}}const D=(i,t,n,e,s,l)=>{if(i.clearRect(0,0,t,n),e.forEach(a=>{a.update(s,t,n),a.draw(i,l)}),t>=768){const w=new Map;for(let h=0;h<e.length;h++){const o=e[h];for(let d=h+1;d<e.length;d++){const r=e[d],m=o.x-r.x,y=o.y-r.y;if(Math.abs(m)>150||Math.abs(y)>150)continue;const g=m*m+y*y;if(g<22500){let x=.25*(1-Math.sqrt(g)/150);if(s.x!=null){const f=o.x-s.x,v=o.y-s.y;Math.abs(f)<s.radius&&Math.abs(v)<s.radius&&f*f+v*v<s.radius*s.radius&&(x+=.3)}const c=Math.round(x*100)/100;w.has(c)||w.set(c,[]),w.get(c).push({ax:o.x,ay:o.y,bx:r.x,by:r.y})}}}w.forEach((h,o)=>{i.beginPath(),i.strokeStyle=C(l,o),i.lineWidth=1,h.forEach(({ax:d,ay:r,bx:m,by:y})=>{i.moveTo(d,r),i.lineTo(m,y)}),i.stroke()})}},L=()=>{const i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t=navigator.hardwareConcurrency&&navigator.hardwareConcurrency<=4,n=window.matchMedia("(prefers-reduced-motion: reduce)").matches,e=localStorage.getItem("disableAnimations")==="true";return{isMobile:i,isLowEnd:t,prefersReducedMotion:n,animationsDisabled:e,shouldReduceParticles:i||t||n||e}},R=(i,t)=>t.animationsDisabled||t.prefersReducedMotion?0:t.isMobile?t.isLowEnd?20:40:t.isLowEnd?50:Math.min(Math.floor(i/15),100),T=()=>{const i=b.useRef(null),{theme:t}=P(),n=b.useRef(t);return b.useEffect(()=>{n.current=t},[t]),b.useEffect(()=>{const e=i.current,s=e.getContext("2d");let l,a=[],u={x:null,y:null,radius:150};const w=L(),h=window.innerWidth<768,o=c=>{if(h||w.shouldReduceParticles)return;const f=e.getBoundingClientRect();u.x=c.clientX-f.left,u.y=c.clientY-f.top},d=()=>{u.x=null,u.y=null};function r(){a=[];const c=R(window.innerWidth,w);for(let f=0;f<c;f++)a.push(new q(e.width,e.height))}let m=0;const g=1e3/(w.shouldReduceParticles?30:60),M=(c=0)=>{if(c-m<g){l=requestAnimationFrame(M);return}m=c,D(s,e.width,e.height,a,u,n.current),l=requestAnimationFrame(M)},x=()=>{window.innerWidth===e.width&&window.innerWidth<768||(e.width=window.innerWidth,e.height=window.innerHeight,u.radius=window.innerWidth<768?80:150,window.requestIdleCallback?window.requestIdleCallback(()=>r(),{timeout:1e3}):r())};return window.addEventListener("resize",x),window.addEventListener("mousemove",o),window.addEventListener("touchend",d),window.addEventListener("mouseout",d),e.width=window.innerWidth,e.height=window.innerHeight,u.radius=window.innerWidth<768?80:150,window.requestIdleCallback?window.requestIdleCallback(()=>{r(),M()},{timeout:500}):(r(),M()),()=>{window.removeEventListener("resize",x),window.removeEventListener("mousemove",o),window.removeEventListener("touchend",d),window.removeEventListener("mouseout",d),cancelAnimationFrame(l)}},[]),E.jsx("canvas",{ref:i,className:"absolute inset-0 z-0 pointer-events-none"})};export{T as default};
